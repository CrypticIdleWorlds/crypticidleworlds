<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cryptic Idle Worlds</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="game-container">
    <aside id="skills-tab">
      <h2>Skills</h2>
      <div class="skill-section">
        <h3>Combat</h3>
        <ul id="combat-skills"></ul>
      </div>
      <div class="skill-section">
        <h3>Non-Combat</h3>
        <ul id="noncombat-skills"></ul>
      </div>
    </aside>

    <main id="main-panel">
      <nav id="top-menu">
        <button onclick="togglePanel('combat')">Combat</button>
        <button onclick="togglePanel('skills')">Skills</button>
        <button onclick="togglePanel('inventory')">Inventory</button>
      </nav>

      <section id="content-area">
        <div id="combat" class="panel active">
          <h2>Combat Selection</h2>
          <p>Select an enemy region and encounter to begin.</p>

          <div class="enemy-row">
            <img src="monsters/blight_rat.png" alt="Blight Rat" width="100">
            <p>Fight: Blight Rat (Lv. 5 Monster)</p>
            <button onclick="defeatEnemy('melee', 5)">Engage</button>
          </div>

          <div class="enemy-row">
            <img src="monsters/ashen_whelp.png" alt="Ashen Whelp" width="100">
            <p>Fight: Ashen Whelp (Lv. 5 Monster)</p>
            <button onclick="defeatEnemy('melee', 5)">Engage</button>
          </div>

          <div class="enemy-row">
            <img src="bosses/ashen_whelp_matriarch.png" alt="Ashen Whelp Matriarch" width="100">
            <p>Fight: Ashen Whelp Matriarch (Lv. 15 Boss)</p>
            <button onclick="defeatEnemy('melee', 15)">Engage</button>
          </div>
        </div>

        <div id="skills" class="panel hidden">
          <h2>Skills Panel</h2>
          <p>This panel just mirrors the skills tab, or can be used for training interactions.</p>
        </div>

        <div id="inventory" class="panel hidden">
          <h2>Inventory</h2>
          <p>Inventory will appear here.</p>
        </div>
      </section>
    </main>
  </div>

  <div id="terminal-log" style="padding:10px;background:#000;border-top:2px solid #00ff99;height:120px;overflow-y:auto;font-size:12px;">
    [LOG] Cryptic Idle Worlds loaded.<br>
    [LOG] Welcome, Commander.
  </div>

  <script>
    const skillData = {
      melee: { type: 'combat', xp: 0, level: 1 },
      ranged: { type: 'combat', xp: 0, level: 1 },
      techno_magic: { type: 'combat', xp: 0, level: 1 },
      slayer: { type: 'combat', xp: 0, level: 1 },
      cryptomining: { type: 'noncombat', xp: 0, level: 1 },
      datafishing: { type: 'noncombat', xp: 0, level: 1 },
      codecraft: { type: 'noncombat', xp: 0, level: 1 },
      forgenetics: { type: 'noncombat', xp: 0, level: 1 },
      system_hacking: { type: 'noncombat', xp: 0, level: 1 }
    };

    const xpTable = Array(100).fill(0).map((_, level) => {
      let xp = 0;
      for (let i = 1; i < level; i++) xp += Math.floor(i + 300 * Math.pow(2, i / 7));
      return Math.floor(xp / 4);
    });

    function updateSkillTabs() {
      const combatList = document.getElementById('combat-skills');
      const noncombatList = document.getElementById('noncombat-skills');
      combatList.innerHTML = '';
      noncombatList.innerHTML = '';

      for (const skill in skillData) {
        const data = skillData[skill];
        const li = document.createElement('li');
        li.innerHTML = `<div class="skill-row"><div class="icon-box">[icon]</div><span>${skill.replace('_', ' ')}</span><span class="level">Lv. ${data.level}</span></div>`;
        (data.type === 'combat' ? combatList : noncombatList).appendChild(li);
      }
    }

    function gainXP(skill, amount) {
      skillData[skill].xp += amount;
      for (let lvl = 1; lvl <= 99; lvl++) {
        if (skillData[skill].xp >= xpTable[lvl] && skillData[skill].level < lvl) {
          skillData[skill].level = lvl;
        }
      }
      updateSkillTabs();
    }

    function togglePanel(id) {
      document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
    }

    function defeatEnemy(skill, level) {
      const xpGain = Math.floor(level * 2); // Lv 5 = 10 XP, Lv 15 = 30 XP
      gainXP(skill, xpGain);
      const log = document.getElementById('terminal-log');
      if (log) {
        log.innerHTML += `[COMBAT] Defeated Lv. ${level} enemy. +${xpGain} ${skill} XP.<br />`;
        log.scrollTop = log.scrollHeight;
      }
    }

    window.onload = updateSkillTabs;
  </script>
</body>
</html>


